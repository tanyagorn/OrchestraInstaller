<!DOCTYPE html>
<html>
<head>
   <title>Orchestra mapping</title>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, minimum-scale=1" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="declarative,graphical,mapping,type,variable" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="content-language" content="en-us" />
   <meta name="description" content="Concept A graphical mapping is a mapping defined using a graphical editor. Actually there are three different sub types: &nbsp;The so called Orchestra mapping is the standard..." />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link id="tabscheme" type="text/css" href="hm_topic.css" rel="stylesheet" />   
<style type="text/css">
/* No header topics */

/* Breadcrumb trail */
p#breadcrumbs {
font-family: Verdana, Tahoma, Helvetica, Sans-Serif;   padding: 2px 0 1px 2px;
   margin: 0;
   font-size: 8pt; 
   color: #999;
   }   
p#breadcrumbs a { color: #999; text-decoration: none;}
p#breadcrumbs a:visited {color: #999;}
p#breadcrumbs a:hover { color: #333; border-bottom: 1px dotted #333; }

/* Search hightlight color */
span.highlight {background-color: #ffff40;}
</style>
<script type="text/javascript">
var hmHeaderTopic = true;

</script> 
<!--[if IE 9]>
<link id="iesvgcss" rel="stylesheet" type="text/css" href="hm_webhelp_svg.css" />
<![endif]-->	
<script src="jquery.js"></script>
<script type="text/javascript" src="jquery.tools.min.js"></script>
<script type="text/javascript" src="jquery.scrollTo-min.js"></script>
<script type="text/javascript"> 
// General topic variables
var tVars = {
   hmHelpPage: "index.html",
   nextP: "designer_mapping_target_only.html",
   prevP: "message-mappings.html",
   currP: "designer_mapping_graphical.html",
   descr: "Concept A graphical mapping is a mapping defined using a graphical editor. Actually there are three different sub types: &nbsp;The so called Orchestra mapping is the standard...",
   keys: "declarative,graphical,mapping,type,variable",
   defP: "message-mappings.html",
   mailUrl: "",
   mailUrlQuery: "",
   projectTitle: "Documentation",
   titleP: "Orchestra mapping",
   mailsubject: "Your feedback: Documentation - Orchestra mapping",
   sharesubject: "Documentation - Orchestra mapping",
   simplesubject: "Documentation%20Feedback",
   mailid: "designer_mapping_graphical",
   mailpath: "Orchestra Documentation &gt; Reference Manual &gt; Designer Reference &gt; Scenario Elements &gt; Message mappings &gt; Orchestra mapping /",
   mailbody: "",
   fbtype: false,
   header: true,
   background: "spacer.gif",
   tablesReady: false,
   togglesReady: false,
   webRedirect: true,
   topicTitleBar: true,
   titleBarContent: "topic",
   printFooter: true,
   zoomTip: "Click here to view image in its original size",
   autoPrint: true,
   printButton: "Print",
   printButtonTip: "Print topic"
   }
// Popup configuration
 var hmpBShadow = true;
 var hmPopSmallDim = 500;
 var hmPopKillVideo = true;
 // AutoTOC variables
 var hmatocvars = {
   atoc_show: true,
   atoc_title: "Topic content",
   atoc_tip: "Navigate to:&nbsp;",
   atoc_minHeaders: 3,
   atoc_btntip_off: "No topiv headers on this site",
   atoc_btntip_on: "Show/hide topic menu",
   atoc_toptip: "Navigate to beginning of page",
   atoc_top: "Beginning of page",
   atoc_bg: "#f6f6f6",
   atoc_border: "silver",
   atoc_linkcolor: "#444",
   atoc_linklimit: 45,
   atoc_hovercolor: "#000",
   atoc_hoverbgcolor: "#e0e0e0"
}
// Sortable tables
var sortVars = {
   europeandate: false,
   germanNumbers: false,
   imagePath: "",
   image_up: "arrow-up.gif",
   image_down: "arrow-down.gif",
   image_empty: "arrow-empty.gif",
   image_none: "arrow-none.gif",
   sort_tip: "Click here to sort column",
   umlauts: "false"
   }

</script>


<script type="text/javascript" src="helpman_settings.js"></script>
<script type="text/javascript" src="helpman_topicinit.js"></script>
<script type="text/javascript" src="hmtopic.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "designer_mapping_graphical.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!-- Help & Manual Premium Pack templates by Tim Green, Copyright (c) 2011-2014, All Rights Reserved -->
<!--ZOOMSTOP-->



<ul id="topictabs" class="tabs">
<li id="indextab" class="hmtabs"><a href="#" id="indextablink" class="current"><span>Orchestra mapping</span></a></li>
</ul>
<div id="hmbox">
<div id="hmheader">
<div id="hmheadercontents">
<p id="breadcrumbs" class="sync-toc">
<b><span class="sync-toc"><a rel="nofollow" class="sync-toc-link" href="index.html?designer_mapping_graphical.html" target="_top">&lt;&lt;&nbsp;Click here for table of contents&nbsp;&gt;&gt;</a>&nbsp;&nbsp;</span></b></p> 
<h1 class="p_Heading1"><span class="f_Heading1">Orchestra mapping</span></h1>

</div>
<div id="atocIcon" class="navdivs">
<img class="navicon" id="hmAtocLink" src="contents_off.png" alt="No topiv headers on this site" title="No topiv headers on this site" />
<br /><span>Topic content</span>
</div>
</div>
<div id="autoTocWrapper" class="topicmenu"></div>
<div id="idcontent">
<div id="unclicker"></div>
<!--ZOOMRESTART-->
<h2 class="p_Heading2"><span class="f_Heading2">Concept</span></h2>
<p class="p_Normal">A <span class="f_Emphasize">graphical mapping</span> is a mapping <span class="f_BulletedListNormal">defined using a graphical editor. Actually there are three different sub types: </span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">The so called </span><span class="f_Emphasize">Orchestra mapping</span><span class="f_BulletedListNormal"> is the standard graphical mapping with source and target types.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">An <a href="designer_mapping_idoc.html" class="topiclink">IDOC mapping</a> is a graphical mapping which transforms SAP-Messages of type IDOC_INBOUND_ASYNCHRONOUS to Messages defining the structures of SAP-IDOCs. This message types are imported directly from a SAP system (see ). They contain additional information which is used from Orchestra to automatically create the complete mapping. </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal"> A <a href="designer_mapping_target_only.html" class="topiclink">Target only mapping</a> is a special mapping having no source message but only an output message. It is typically used to create dummy messages or &nbsp;to create small messages using some parameters.</span></p><h2 class="p_Heading2"><span class="f_Heading2">Creation</span></h2>
<p class="p_Normal">To create a new <span class="f_Emphasize">Orchestra mappings</span> select the group <span class="f_Emphasize">message mappings</span> and click on the right mouse button. Then a &nbsp;popup menu opens where you &nbsp;select the item <span class="f_buttonslabelsetc">Create mapping</span>.</p>
<p class="p_Normal">A dialog opens where you must enter the name and optionally a description of the new mapping.</p>
<div class="p_Normal"><div style="margin:0;width:608px"><img alt="enter the name of mapping" title="enter the name of mapping" width="608" height="333" style="width:608px;height:333px;border:none" src="designer_mapping_create_step1.png"/><p style="text-align:center"><span class="f_ImageCaption">enter the name of mapping</span></p></div></div>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Then click on the button <span class="f_buttonslabelsetc">next</span>.</p>
<p class="p_Normal">In the next dialog you select the type of mapping you want to create and click on the button <span class="f_buttonslabelsetc">next</span>.</p>
<div class="p_Normal"><div style="margin:0;width:608px"><img alt="select a mapping type" title="select a mapping type" width="608" height="333" style="width:608px;height:333px;border:none" src="designer_mapping_create_step2.png"/><p style="text-align:center"><span class="f_ImageCaption">select a mapping type</span></p></div></div>
<p class="p_Normal">Here you have to select the type Orchestra mapping.</p>
<p class="p_Normal">In the next step you select the <a href="message-types.html" class="topiclink">Message type</a> describing the source structure.</p>
<div class="p_Normal"><div style="margin:0;width:608px"><img alt="select the source type of the mapping" title="select the source type of the mapping" width="608" height="333" style="width:608px;height:333px;border:none" src="designer_mapping_create_select_source.png"/><p style="text-align:center"><span class="f_ImageCaption">select the source type of the mapping</span></p></div></div>
<p class="p_Normal">Then you select the <a href="message-types.html" class="topiclink">Message type</a> describing the target structure</p>
<div class="p_Normal"><div style="margin:0;width:608px"><img alt="select the target type of the mapping" title="select the target type of the mapping" width="608" height="333" style="width:608px;height:333px;border:none" src="designer_mapping_create_select_target.png"/><p style="text-align:center"><span class="f_ImageCaption">select the target type of the mapping</span></p></div></div>
<p class="p_Normal">Finally you may decide to create <a href="designer_mapping_graphical.html#designer_graphical_node_mapping" class="topiclink">Node mappings</a> automatically.</p>
<div class="p_Normal"><div style="margin:0;width:608px"><img alt="Options to create initial node mappings automatically" title="Options to create initial node mappings automatically" width="608" height="333" style="width:608px;height:333px;border:none" src="designer_mapping_create_select_final_options.png"/><p style="text-align:center"><span class="f_ImageCaption">Options to create initial node mappings automatically</span></p></div></div>
<p class="p_Normal">If you select the option <span class="f_buttonslabelsetc">Ignore case of attribute names</span> the wizard connects elements also if their names differ only in case.</p>
<p class="p_Normal">After clicking on the <span class="f_buttonslabelsetc">Finish</span> button the graphical editor is opened where you can further edit the mapping.</p>
<h2 class="p_Heading2"><a id="designer_graphical_configuration" class="hmanchor"></a><span class="f_Heading2">Configuration</span></h2>
<p class="p_Normal">To configure the mapping click on the entry in the scenario element tree.</p>
<p class="p_Subheading"><span class="f_Subheading">The graphical editor area</span></p>
<p class="p_Normal">This is the main area where a <span class="f_Emphasize">graphical mapping </span>is displayed and modified.</p>
<p class="p_Normal">The following picture shows a small mapping which maps a Message from a SAP system to a Message describing a Database table. In the SAP message there is one element tables containing many elements named T_KEY_PO. For each of these elements the mapping creates a new element named <span class="f_Emphasize">XAMA_SAP_BESTELL_TEMP</span> in the output message. Such a relationship is called a node mapping. </p>
<p class="p_Normal"><img alt="designer_mapping_editor_area" width="882" height="510" style="margin:0;width:882px;height:510px;border:none" src="designer_mapping_editor_area.png"/></p>
<p class="p_Normal">In the configuration area of the editor we see two node mappings. There is always a node mapping which creates the root node. And there may exist a lot of node mappings creating other nodes. In our example there is a second node mapping which is responsible for creating the child nodes <span class="f_Emphasize">XAMA_SAP_BESTELL_TEMP</span>.<br />
In this small example you can also see that the actual data values written into the target message may come from different sources. </p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">They may come directly from the elements of the source message, this is called a direct mapping.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">There might exist an intermediate transformation of the values. Our example shows an invocation of the function </span><span class="f_Emphasize">toLong</span><span class="f_BulletedListNormal"> which parses a string value and creates a long integer value. Another example of such a function call is the usage of </span><span class="f_Emphasize">current-date</span><span class="f_BulletedListNormal"> in the mapping. </span><span class="f_Emphasize">current-date</span><span class="f_BulletedListNormal"> is actually a function which has no input parameters but delivers simply the date of today.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">The third type of assignment we see here is the assignment to the STATE element. It accesses a variable named State which is actually transferred to the mapping when it is invoked.</span></p><p class="p_Normal">For more details on how to assign values in a graphical mapping see <a href="designer_mapping_graphical.html#designer_graphical_attribute_mapping" class="topiclink">Attribute mappings</a> .</p>
<p class="p_Subheading"><span class="f_Subheading">Reloading a message type</span></p>
<p class="p_Normal">If a mapping is created the structure of the source and the target messages are stored together with this mapping. <span class="f_notice">If the according message type is changed later the mapping is not aware of this change.</span> To change the mapping accordingly you have to reload the message type. To do this select the root element of the source or of the target tree, then click the right mouse button. You will see a Field named Reload type. If you click on it a dialog appears asking Do you want to replace this message type? If you then click on the <span class="f_buttonslabelsetc">Next</span> button and Orchestra encounters a conflict a page denoting the conflict appears. Some conflicts are not resolvable. E.g. if in the message type an element was removed that actually is used in the mapping the Reload cannot be done. Other conflicts can be resolved by the user.</p>
<p class="p_Normal">If no conflicts exist or all conflicts are resolved by the user a list of activities appears which tell you what is to be done.</p>
<p class="p_Normal"> <img alt="designer_mapping_graphical_reload_type" width="491" height="333" style="margin:0;width:491px;height:333px;border:none" src="designer_mapping_graphical_reload_type.png"/></p>
<p class="p_Normal">If you then click on the <span class="f_buttonslabelsetc">Finish</span> button the message type will be updated.</p>
<p class="p_Subheading"><a id="designer_graphical_node_mapping" class="hmanchor"></a><span class="f_Subheading">Node mappings</span></p>
<p class="p_Normal">For a given element type in the source message type a node mapping creates one or more elements in the target message depending on the number of elements in the source message.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Creation of node mappings</span></p>
<p class="p_Normal">To create a node mapping select the source node and the target node and click the Add button in the configuration area. Now the node mapping will be created. In the graphical area it is depicted by a red line connecting the two nodes. </p>
<div class="p_Normal"><div style="margin:0;width:805px"><img alt="creating a new node mapping" title="creating a new node mapping" width="805" height="553" style="width:805px;height:553px;border:none" src="designer_mapping_graphical_node_mappings.png"/><p style="text-align:center"><span class="f_ImageCaption">creating a new node mapping</span></p></div></div>
<p class="p_Normal">If the two nodes have elements with equal names you may click the Auto button and Orchestra will automatically create attribute assignments for these elements. In the picture above this is show also through four black lines connecting the elements <span class="f_Emphasize">mid</span>, <span class="f_Emphasize">orderid</span>, <span class="f_Emphasize">itemtype</span> and <span class="f_Emphasize">count</span>. Elements in the target element which in the according message type are defined to be required are show with a red background colour. Elements which are optional according to the message type are shown with a dotted border. </p>
<p class="p_Normal">You also can see that attribute mappings within a node mapping may reference elements from a parent element. We will discuss attribute mappings later in the section called <a href="designer_mapping_graphical.html#designer_graphical_attribute_mapping" class="topiclink">Attribute mappings</a>. </p>
<p class="p_Normal">If you have several node mappings you can display the attribute mappings of that node mapping by selecting it in the list of node mappings in the configuration area.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Filters for node mappings</span></p>
<p class="p_Normal">Sometimes not all nodes from the source message are to be transferred to the target message. To facilitate this, Orchestra allows to set a filter on a node mapping. To filter a node mapping select the node mapping in the configuration area and click on the <span class="f_buttonslabelsetc">Edit</span> button. The dialog <span class="f_buttonslabelsetc">change node mapping</span> appears where the user can add or edit a filter expression.</p>
<div class="p_Normal"><div style="margin:0;width:718px"><img alt="setting an XPath filter on a node mapping" title="setting an XPath filter on a node mapping" width="718" height="253" style="width:718px;height:253px;border:none" src="designer_mapping_graphical_node_mappings_filter.png"/><p style="text-align:center"><span class="f_ImageCaption">setting an XPath filter on a node mapping</span></p></div></div>
<p class="p_Normal">In the text field you can enter &nbsp;or modify a filter expression using XPath. The filter expression is an expression on the current source node of the node mapping. You may also reference the mapping variables using the XPath variable notation $varname. Also note that in XPath you <span class="f_Emphasize">must</span> use prefixes to reference a namespace. Therefore in the dialog you can define prefixes for the namespaces used in the message.</p>
<p class="p_Normal">If a filter is set the node mapping in the mapping graph is depicted by a dashed line.</p>
<div class="p_Normal"><div style="margin:0;width:513px"><img alt="A node mapping having a filter is depicted with a dashed line" title="A node mapping having a filter is depicted with a dashed line" width="513" height="214" style="width:513px;height:214px;border:none" src="designer_mapping_graphical_node_mappings_filter2.png"/><p style="text-align:center"><span class="f_ImageCaption">A node mapping having a filter is depicted with a dashed line</span></p></div></div>
<p class="p_Normal">To remove the filter simply delete the filter expression int the editor dialog.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Using the alternative view</span></p>
<p class="p_Normal">If a graphical mapping consists of many node mappings it may be useful to work with the so called alternative view.</p>
<p class="p_Normal">The upper part of the view shows the whole mapping, but only node mappings are shown, so the view is more concise.</p>
<div class="p_Normal"><div style="margin:0;width:662px"><img alt="splitted view of a graphical mapping" title="splitted view of a graphical mapping" width="662" height="259" style="width:662px;height:259px;border:none" src="designer_mapping_graphical_alternative_view.png"/><p style="text-align:center"><span class="f_ImageCaption">splitted view of a graphical mapping</span></p></div></div>
<p class="p_Normal">In the lower part of the mapping the currently selected node mapping is visible.</p>
<p class="p_Normal">To switch between the two alternative views select the mapping in the scenario tree on the left of the designer, click the right mouse button and select <span class="f_buttonslabelsetc">Change view</span>.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Changing the hierarchy of node mappings</span></p>
<p class="p_Normal">Node mappings form a hierarchical tree. The execution of a node mapping depends of the execution of a parent node mapping. The hierarchical relationship of the node mappings is defined by the hierarchy of the target nodes. But in case of node mappings having the same target node it might be necessary to define the dependencies between the node mappings creating the same type of node. To change this, select the node mapping and then click on the Edit button.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_node_mapping_change_hierarchy" width="304" height="92" style="margin:0;width:304px;height:92px;border:none" src="designer_mapping_graphical_node_mapping_change_hierarchy.png"/></p>
<p class="p_Normal">If the Edit dialog for node mappings you have the possibility to change the parent of a node mapping &nbsp;or the XPath used to navigate from last source node to the source of this node mapping. In many cases there are actually no alternatives, so the select boxes for this alternatives are disabled.</p>
<p class="p_Subheading"><a id="designer_graphical_attribute_mapping" class="hmanchor"></a><span class="f_Subheading">Attribute mappings</span></p>
<p class="p_Normal">Attribute mappings are defined within a node mapping. They define the values which are to be mapped onto the fields of the target message.<br />
In the following paragraphs you find information about the different types of attribute mappings.</p>
<p class="p_Normal">To create attribute mappings you use the tools from the toolbar in the top area of the mapping editor.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_tool_bar" width="469" height="41" style="margin:0;width:469px;height:41px;border:none" src="designer_mapping_graphical_tool_bar.png"/></p>
<p class="p_Normal">Simply click on the tool to use it, afterwards the cursor will change to indicate that a tool was selected.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Direct mappings</span></p>
<p class="p_Normal">A direct mapping is represented by a simple line from the source to the target field.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_attr_mapping_direct" width="283" height="25" style="margin:0;width:283px;height:25px;border:none" src="designer_mapping_graphical_attr_mapping_direct.png"/></p>
<p class="p_Normal">To create a direct mapping</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the </span><span class="f_Emphasize">Assignment tool </span><span class="f_BulletedListNormal">(Depicted by an arrow </span><img alt="designer_mapping_graphical_tool_assign" width="36" height="16" style="margin:0;width:36px;height:16px;border:none" src="designer_mapping_graphical_tool_assign.png"/><span class="f_BulletedListNormal">).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">In the mapping graph click on the source attribute and hold the mouse button</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Draw the line to the intended target attribute and release the mouse button</span></p><div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-notice-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-notice-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_notice"><span class="f_notice">If the assignment doesn't work, Orchestra shows a message in the Info field located in the configuration area of the designer</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Normal">Typically there are two reasons for errors:</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">There is no node mapping selected</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">Or the data type of the source is not compatible with the target field.</span><br />
<span class="f_BulletedListNormal"> <img alt="designer_mapping_error_notice" width="344" height="29" style="margin:0;width:344px;height:29px;border:none" src="designer_mapping_error_notice.png"/></span><br />
<span class="f_BulletedListNormal">To find out the data type of an element or an attribute, double click on the element and its data type is displayed. It might be necessary to apply a conversion function; see </span><span class="f_Emphasize">Using predefined functions</span><span class="f_BulletedListNormal"> in this paragraph for details.</span></p><p class="p_Subheading2"><span class="f_Subheading2">Mapping fixed values</span></p>
<p class="p_Normal">Of course you can assign fixed constant values to a target field.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_attr_mapping_constant" width="282" height="34" style="margin:0;width:282px;height:34px;border:none" src="designer_mapping_graphical_attr_mapping_constant.png"/></p>
<p class="p_Normal">To map a constant value</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the value tool (Depicted by a rounded rectangle with grey background and text val </span><img alt="designer_mapping_graphical_tool_const_value" width="39" height="21" style="margin:0;width:39px;height:21px;border:none" src="designer_mapping_graphical_tool_const_value.png"/><span class="f_BulletedListNormal">).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the new value will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Double click on the new value symbol to change the value and its data type. Note that the value has to be entered in the form required from the XML schema type. (See <a href="http://www.w3.org/TR/xmlschema-2/" target="_blank" class="weblink">XML Schema Part 2: Datatypes</a> for details)</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">In the mapping graph connect the value with the target attribute using the Assignment tool (Depicted by an arrow).</span></p><p class="p_Normal">Note that the the value type has to be compatible with the type of the target element.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Using simple operations</span></p>
<p class="p_Normal">A simple operation is an Addition or Multiplication of any number of operands. </p>
<p class="p_Normal"><img alt="designer_mapping_graphical_attr_mapping_operation" width="287" height="48" style="margin:0;width:287px;height:48px;border:none" src="designer_mapping_graphical_attr_mapping_operation.png"/></p>
<p class="p_Normal">To map the value of such an operation</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the </span><span class="f_Emphasize">Commutative expression tool </span><span class="f_BulletedListNormal">(Depicted by a </span><span class="f_Emphasize">circle</span><span class="f_BulletedListNormal">).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the new </span><span class="f_Emphasize">operation</span><span class="f_BulletedListNormal"> will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Double click on the new </span><span class="f_Emphasize">operation</span><span class="f_BulletedListNormal"> symbol to change the operator and select an optional constant operator</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">In the mapping graph connect the source attributes with the the new </span><span class="f_Emphasize">operation</span><span class="f_BulletedListNormal">. Note that a simple operation may have an arbitrary number number of parameters with random order because only Addition and Multiplication are allowed.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">6.</span><span class="f_BulletedListNormal">Connect the </span><span class="f_Emphasize">operation</span><span class="f_BulletedListNormal"> with the intended target attribute using the a</span><span class="f_Emphasize">ssignment tool </span><span class="f_BulletedListNormal">(Depicted by an arrow).</span></p><div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-info-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-info-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Info"><span class="f_Info">Note: This tool is often useful to multiply an attribute value with a fixed number or add a fixed number:</span></p>
</td>
</tr>
</table>
</div>
<div class="p_Normal"><div style="margin:0;width:225px"><img alt="double a numeric value" title="double a numeric value" width="225" height="26" style="width:225px;height:26px;border:none" src="designer_mapping_graphical_attr_mapping_operation2.png"/><p style="text-align:center"><span class="f_ImageCaption">double a numeric value</span></p></div></div>
<p class="p_Subheading2"><span class="f_Subheading2">Mapping variables</span></p>
<p class="p_Normal">You can also assign variable values to a target field. Note that the variable must be defined before (see paragraph <a href="designer_mapping_graphical.html#designer_mapping_graphical_using_variables" class="topiclink">Using variables</a> &nbsp;in this section).</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_attr_mapping_variable" width="222" height="32" style="margin:0;width:222px;height:32px;border:none" src="designer_mapping_graphical_attr_mapping_variable.png"/></p>
<p class="p_Normal">To map a variable value</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the Variable tool (Depicted by a rectangle with text var <img alt="designer_mapping_graphical_tool_var" width="39" height="18" style="margin:0;width:39px;height:18px;border:none" src="designer_mapping_graphical_tool_var.png"/>).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the variable will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Double click on the new variable symbol to select the actual variable referenced. </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">In the mapping graph, connect the variable symbol with the target attribute using the Assignment tool (Depicted by an arrow).</span></p><div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-info-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-info-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Info"><span class="f_Info">Note that the the type of the variable has to be compatible with the type of the target element.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Normal">&nbsp;</p>
<p class="p_Subheading2"><a id="designer_graphical_using_predefined_functions" class="hmanchor"></a><span class="f_Subheading2">Attribute mapping using predefined functions</span></p>
<p class="p_Normal">There is a bunch of predefined functions you may use in the mapping (see <a href="designer_mapping_functions.html" class="topiclink">Mapping functions</a> for details).</p>
<p class="p_Normal">The following picture shows how the predefined functions <span class="f_Emphasize">current-date</span> and <span class="f_Emphasize">addDaysToDate</span> are used. You also can see here that the different types of expressions like, <span class="f_Emphasize">Constant values</span>, <span class="f_Emphasize">Variable references</span>, <span class="f_Emphasize">Simple operations</span> and <span class="f_Emphasize">Function calls</span> can be combined to compute the expected value. Some functions, like <span class="f_Emphasize">current-date,</span> have no parameters at all.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_attr_mapping_function" width="424" height="60" style="margin:0;width:424px;height:60px;border:none" src="designer_mapping_graphical_attr_mapping_function.png"/></p>
<p class="p_Normal">To select and use such a function do the following:</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the panel named </span><span class="f_buttonslabelsetc">Mapping</span><span class="f_BulletedListNormal"> select the wanted function</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the </span><span class="f_Emphasize">Function call</span><span class="f_BulletedListNormal"> will be added in the graph</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">In the mapping graph connect the source expressions with the parameters of the function</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">Connect the </span><span class="f_Emphasize">Function call</span><span class="f_BulletedListNormal"> symbol with the target attribute using the Assignment tool (Depicted by an arrow)</span></p><p class="p_Normal">Note that the the result type of the used function has to be compatible with the type of the target element.</p>
<p class="p_Normal">Predefined functions are grouped according to their different purposes: </p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">There is a set of functions which are used to convert values between data types, e.g. to interpret a string as an integer value.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">Other functions modify values e.g. change a string to upper case </span></p><p class="p_Subheading2"><span class="f_Subheading2">Attribute mapping using Java </span></p>
<p class="p_Normal">You also may define your own functions using Java as a programming language. Actually you define anonymous functions which are usable only at one point in the mapping. If you want to reuse functions you may define them in <a href="java-source.html" class="topiclink">Java Source</a> elements. These new functions then are also visible in the<span class="f_BulletedListNormal"> panel named </span><span class="f_buttonslabelsetc">Mapping </span>(on the right of the Mapping editor) and are usable in the same way than the <span class="f_Emphasize">predefined functions</span>.</p>
<div class="p_Normal"><div style="margin:0;width:356px"><img alt="Using a user defined function" title="Using a user defined function" width="356" height="68" style="width:356px;height:68px;border:none" src="designer_mapping_graphical_attr_mapping_user_function.png"/><p style="text-align:center"><span class="f_ImageCaption">Using a user defined function</span></p></div></div>
<p class="p_Normal">To create and use our own Java function</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the </span><span class="f_Emphasize">Java tool </span><span class="f_BulletedListNormal">(Depicted by a rounded rectangle with the text </span><span class="f_Emphasize">func </span><img alt="designer_mapping_graphical_tool_java" width="38" height="24" style="margin:0;width:38px;height:24px;border:none" src="designer_mapping_graphical_tool_java.png"/><span class="f_BulletedListNormal">).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the new java expression will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Double click on the new symbol and edit it</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">Connect the java expression with the intended target attribute using the </span><span class="f_Emphasize">Assignment tool </span><span class="f_BulletedListNormal">(Depicted by an arrow).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">6.</span><span class="f_BulletedListNormal">In the mapping graph click on the source attributes and connect it with the parameters of the new java expression.</span></p><p class="p_Normal">To edit the function double click on the symbol representing it in the mapping graph.</p>
<div class="p_Normal"><div style="margin:0;width:464px"><img alt="Dialog to edit a user defined java method used in a mapping" title="Dialog to edit a user defined java method used in a mapping" width="464" height="491" style="width:464px;height:491px;border:none" src="designer_mapping_graphical_attr_mapping_java_editor.png"/><p style="text-align:center"><span class="f_ImageCaption">Dialog to edit a user defined java method used in a mapping</span></p></div></div>
<p class="p_Normal">First of all you should set a descriptive title to be displayed in the mapping graph.</p>
<p class="p_Normal">Then you must select the result type, add the necessary parameters and provide the implementation of the function. </p>
<div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-notice-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-notice-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_notice"><span class="f_notice">Regarding mappings it is important to know, that the order of execution is defined by the structure of the target message. Therefore every expression used within a mapping must have a connection to the target message, otherwise the expression is not executed!</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Subheading2"><a id="designer_graphical_attribute_mapping_xpath" class="hmanchor"></a><span class="f_Subheading2">Attribute mapping using XPath</span></p>
<p class="p_Normal">Sometimes you want to access and map values of attributes depending on values of the current source node.</p>
<p class="p_Normal">E.g. in the following example we have a source message with n values named pkey followed by n values named pval. The mapping is expected to map keys and values having the same position together into one target node of type <span class="f_Emphasize">Property</span>.</p>
<div class="p_Normal"><div style="margin:0;width:578px"><img alt="Example mapping containing an XPath expression" title="Example mapping containing an XPath expression" width="578" height="244" style="width:578px;height:244px;border:none" src="designer_mapping_graphical_example_using_xpath.png"/><p style="text-align:center"><span class="f_ImageCaption">Example mapping containing an XPath expression</span></p></div></div>
<p class="p_Normal">The XPath used in the XPath expression named <span class="f_CodeExample">get_pval is ../pval[getFilterPos()]</span> . The XPath is executed on the current Record node. It searches for the pval belonging to the current Record and having the same position. Actually the method getFilterPos delivers the position of the current node relative to its parent.</p>
<p class="p_Normal">To create and use such an XPath you</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the toolbar select the </span><span class="f_Emphasize">XPath tool </span><span class="f_BulletedListNormal">(Depicted by a arrowed rectangle</span><img alt="designer_mapping_graphical_tool_xpath" width="35" height="18" style="margin:0;width:35px;height:18px;border:none" src="designer_mapping_graphical_tool_xpath.png"/><span class="f_BulletedListNormal"> ).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the new XPath expression will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Double click on the new symbol and edit it</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">Connect the XPath expression with the intended target attribute using the </span><span class="f_Emphasize">Assignment tool </span><span class="f_BulletedListNormal">(Depicted by an arrow).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">6.</span><span class="f_BulletedListNormal">In the mapping graph click on the source attributes and connect it with the parameters of the new XPath expression.</span></p><p class="p_Normal">To edit the <span class="f_BulletedListNormal">XPath</span> double click on the symbol representing it in the mapping graph.</p>
<div class="p_Normal"><div style="margin:0;width:569px"><img alt="Dialog to edit an XPath element used in a mapping" title="Dialog to edit an XPath element used in a mapping" width="569" height="525" style="width:569px;height:525px;border:none" src="designer_mapping_graphical_attr_mapping_xpath_editor.png"/><p style="text-align:center"><span class="f_ImageCaption">Dialog to edit an XPath element used in a mapping</span></p></div></div>
<p class="p_Normal">First of all you should set a descriptive title to be displayed in the mapping graph.</p>
<p class="p_Normal">Then you must add a namespace and assign a prefix if a namespace is used in the message. Otherwise the Xpath will not find the referenced nodes. Then add the XPath and check if it is syntactically correct by clicking on the validate button. You may change the result type. That means that the result is automatically changed changed to the expected type. You also may add additional parameters which then can be referenced from the XPath (like any other <a href="designer_mapping_graphical.html#designer_mapping_graphical_using_variables" class="topiclink">variable</a>) by prefixing it with a Doller ($) sign. </p>
<div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-notice-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-notice-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_notice"><span class="f_notice">Having complex mapping conditions like the one shown above you should consider using an <a href="designer_mapping_exended_java.html" class="topiclink">Extended Java mapping</a> instead of a graphical mapping.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Subheading2"><a id="calling_lookup_tables_channels" class="hmanchor"></a><span class="f_Subheading2">Calling lookup tables, channels and process models within a graphical mapping</span></p>
<p class="p_Normal">Sometimes you want to map values produced from the invocation of a <a href="lookup.html" class="topiclink">Lookup tables</a>, a <a href="channels.html" class="topiclink">Channel</a> or a <a href="process-models.html" class="topiclink">Process model</a>.</p>
<p class="p_Normal">E.g. in the following example we have a source message with an attribute ident which is used to invoke a <a href="database-outbound-channel.html" class="topiclink">Database Outbound channel</a>. The channel invocation returns two values <span class="f_Emphasize">name</span> and <span class="f_Emphasize">type</span> which then are assigned to the elements <span class="f_Emphasize">rname</span> and <span class="f_Emphasize">rtype</span> of the target element <span class="f_Emphasize">Record</span>.</p>
<div class="p_Normal"><div style="margin:0;width:492px"><img alt="Example mapping containing a channel invocation" title="Example mapping containing a channel invocation" width="492" height="145" style="width:492px;height:145px;border:none" src="designer_mapping_graphical_example_with_channel_call.png"/><p style="text-align:center"><span class="f_ImageCaption">Example mapping containing a channel invocation</span></p></div></div>
<p class="p_Normal">To create and use such an invocation you</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">Select the node mapping you want to modify</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">In the scenario element tree you select the channel, lookup table or process model you want to invoke.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click in the mapping graph; a symbol for the new invocation will be added in the graph.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Connect the output parameters of the invocation with the intended target attributes using the Assignment tool (Depicted by an arrow).</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">In the mapping graph click on the source attributes and connect it with the input parameters of the invocation.</span></p><div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-info-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-info-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Info"><span class="f_Info">If you want to test a mapping containing an invocation in the designer, you first must start the runtime engine!</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Subheading2"><span class="f_Subheading2">Filters for attribute mappings</span></p>
<p class="p_Normal">You may also set a filter on a attribute mapping if it shall be executed only under certain conditions. This might be necessary if the source of an attribute mapping has many values and you want to select a single one fulfilling a particular condition. </p>
<p class="p_Normal">A filtered attribute mapping is depicted by a dashed line. The following picture shows an attribute mapping together with the dialog to edit the filter condition. In this example the source of the attribute mapping is an attribute of a child element. Therefore the mapping has a set of values if an <span class="f_Emphasize">item</span> (the source of the node mapping) has several child elements of type <span class="f_Emphasize">references</span>. The filter condition states that we want to map the <span class="f_Emphasize">itemid</span> of the <span class="f_Emphasize">reference</span> having a <span class="f_Emphasize">reftype</span> with the value <span class="f_Emphasize">contains</span>. As you can see, the context node of the XPath filter is not the itemid itself but its parent node.</p>
<p class="p_Normal"> If there were no filter condition, the mapping would map the first itemid it detects.</p>
<div class="p_Normal"><div style="margin:0;width:983px"><img alt="Attribute mapping with filter condition" title="Attribute mapping with filter condition" width="983" height="423" style="width:983px;height:423px;border:none" src="designer_mapping_graphical_attr_mapping_filter_example.png"/><p style="text-align:center"><span class="f_ImageCaption">Attribute mapping with filter condition</span></p></div></div>
<p class="p_Normal">To create or edit a filter on an attribute mapping double click on the line. Then the dialog to edit a filter condition appears. Add the XPath expression and click the <span class="f_buttonslabelsetc">OK</span> button. To check if the XPath is syntactically correct click on the button <span class="f_buttonslabelsetc">Validate filter</span>.</p>
<div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-info-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-info-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Info"><span class="f_Info">Note that the context node of the XPath filter is not the source attribute itself but its parent node!</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Normal">To remove a filter simply delete the filter condition and click the <span class="f_buttonslabelsetc">OK</span> button.</p>
<p class="p_Subheading"><a id="designer_mapping_graphical_using_variables" class="hmanchor"></a><span class="f_Subheading">Using variables</span></p>
<p class="p_Normal">By default a graphical Orchestra mapping has only one variable defined, it is called MSG and contains the input message as value. Normally you don't need to refer it explicitly. If you have an <a href="designer_mapping_graphical.html#designer_graphical_attribute_mapping_xpath" class="topiclink">XPath mapping</a> &nbsp;you sometimes you need to reference it as $MSG.</p>
<div class="p_Normal"><div style="margin:0;width:794px"><img alt="Initially the list of variables contains only MSG" title="Initially the list of variables contains only MSG" width="794" height="200" style="width:794px;height:200px;border:none" src="designer_mapping_graphical_variable_list_default.png"/><p style="text-align:center"><span class="f_ImageCaption">Initially the list of variables contains only MSG</span></p></div></div>
<p class="p_Normal">If the mapping needs additional parameters to be used in the mapping or you want to return additional output values you must add additional variables. Simply click on the <span class="f_buttonslabelsetc">Add</span> button and a dialog opens where you can enter the name, type, usage and description of the new variable.</p>
<div class="p_Normal"><div style="margin:0;width:329px"><img alt="Dialog to create a new mapping variable" title="Dialog to create a new mapping variable" width="329" height="241" style="width:329px;height:241px;border:none" src="designer_mapping_graphical_variable_create.png"/><p style="text-align:center"><span class="f_ImageCaption">Dialog to create a new mapping variable</span></p></div></div>
<p class="p_Normal">As type you may choose one of the following:</p>
<p class="p_Normal"><span class="f_BulletedListNormal">Variables can have one of the following types. Most of them are types used in XML Schema because XML is the way Orchestra stores data internally and this way it is easy to extract values from XML or create XML documents using a <a href="message-mappings.html" class="topiclink">Message mapping</a>. For the types used in XML schema see <a href="http://www.w3.org/TR/xmlschema-2/" target="_blank" class="weblink">XML Schema Part 2: Datatypes</a>.</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">string</span> A plain Unicode string</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">int</span> A number with values between -2147483648 and 2147483647; a subset of long</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">long</span> A 32 bit integral number</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">integer</span> An unlimited integral number</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">decimal</span> A subset of the real numbers, which can be represented by decimal numerals using period as a decimal indicator. An optional leading sign is allowed.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">boolean</span> has the values true or false</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">double</span> A double-precision 64-bit floating point value.x</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">float</span> A single-precision 32-bit floating point value</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">date</span> A date value with year, month, and day properties plus an optional timezone-valued timezone property</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">dateTime</span> An instant in time with integer-valued year, month, day, hour and minute properties, a decimal-valued second property, and an optional timezone property.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">time</span> An instant of time that recurs every day.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">duration</span> A duration of time. Can be given in units of year, month, day, hour, minute, and second components, respectively. </p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">binary</span> A sequence of bytes or a byte array. Within the graphical mapping this data type is named <span class="f_Bulletedtopiclist">base64Binary</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">any</span> internally represented by a Java object.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">message</span> &nbsp;may contain structured data or binary data. Structured messages are internally represented by a DOM tree. See <a href="designer_glossary_message.html" class="topiclink">Message</a> for details.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">messagelist</span> A ordered sequence of messages. See <a href="designer_glossary_message-list.html" class="topiclink">Message list</a> for details.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">error</span> An error object of Orchestra. May contain &nbsp;error code, error string and a Message. Also a scenario context an an error context may be contained.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">UserInfo</span> An Object carrying user information. May contain user id, user name and a set of allowed roles.</p><p class="p_Normal">The property <span class="f_Emphasize">Required</span> is important in the context of mappings: It influences the internal java type used for simple numeric types like <span class="f_buttonslabelsetc">int</span>, <span class="f_buttonslabelsetc">long</span>, <span class="f_buttonslabelsetc">double</span>, <span class="f_buttonslabelsetc">float</span> or <span class="f_buttonslabelsetc">boolean</span>. If <span class="f_Emphasize">Required</span> is set to true exactly this primitive types are used. If <span class="f_Emphasize">Required</span> is set to false the according Object types are used, meaning that variables of this type may be <span class="f_Emphasize">null</span>.</p>
<p class="p_Normal">The property <span class="f_Emphasize">Usage</span> defines how a variable is used. Allowed values are LOCAL, INPUT, OUTPUT and IN_OUT. If you want to transfer values from a <a href="process-models.html" class="topiclink">Process model</a> to a mapping you must set this Property to INPUT or IN_OUT. If you want to return values from the mapping back to the calling process model this Property must have the value OUTPUT or IN_OUT.</p>
<p class="p_Normal">To change a variable simply click on the <span class="f_buttonslabelsetc">Edit</span> button.</p>
<p class="p_Normal">If you want to <span class="f_buttonslabelsetc">Remove</span> a variable and it is still in use within the mapping, an error message appears:</p>
<p class="p_Normal"> <img alt="designer_mapping_graphical_variable_remove_error" width="272" height="123" style="margin:0;width:272px;height:123px;border:none" src="designer_mapping_graphical_variable_remove_error.png"/></p>
<p class="p_Subheading2"><span class="f_Subheading2">Variable initialization</span></p>
<p class="p_Normal"><span class="f_Comment">The tab </span><span class="f_buttonslabelsetc">node mapping initialization</span><span class="f_Comment"> is hardly ever used, because the originally intended use of this feature is normally done in a <a href="designer_mapping_exended_java.html" class="topiclink">procedural mapping</a>. </span></p>
<p class="p_Normal"><span class="f_Comment">Nevertheless we explain its usage briefly. The tab </span><span class="f_buttonslabelsetc">node mapping initialization</span><span class="f_Comment"> is used when the value of a variable has to be set to an initial value at the start of each node mapping.</span></p>
<p class="p_Normal">Imagine you have a message containing a set of orders and each order contains a list of order items. The items contain an item position and the mapping has to set the order position of the previous item into the the target item. </p>
<p class="p_Normal"><img alt="designer_mapping_graphical_example_with_var_init" width="488" height="349" style="margin:0;width:488px;height:349px;border:none" src="designer_mapping_graphical_example_with_var_init.png"/></p>
<p class="p_Normal">To avoid that an order item at position 1 gets the value from the last order as prevPos we initialize the value of this variable to 0 in the Node mapping to Order.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_variable_initialization" width="574" height="199" style="margin:0;width:574px;height:199px;border:none" src="designer_mapping_graphical_variable_initialization.png"/></p>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-error-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-error-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Warning"><span class="f_Warning">Note that each node mapping may have its own initialization script. So you first must select the appropriate node mapping and then edit the matching initialization script!</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 10px;"><table class="warningattentioninfo table" style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:37px; padding:0px;"><p class="p_Normal"><img alt="alert-info-ico" width="24" height="24" style="margin:0;width:24px;height:24px;border:none" src="alert-info-ico.png"/></p>
</td>
<td style="vertical-align:top; width:1131px; padding:0px;"><p class="p_Info"><span class="f_Info">If you need to use a variable initialization in your graphical mapping you should consider to use a procedural mapping. The graphical mapping is basically declarative. If you need to remember state using a variable an Extended Java mapping is probably the better choice.</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Normal">&nbsp;</p>
<p class="p_Subheading"><a id="designer_mapping_graphical_general_settings" class="hmanchor"></a><span class="f_Subheading">General settings</span></p>
<p class="p_Normal">Finally there are two rarely used attributes of the graphical mapping:</p>
<div class="p_Normal"><div style="margin:0;width:490px"><img alt="Settings affecting the behaviour of the mapping" title="Settings affecting the behaviour of the mapping" width="490" height="143" style="width:490px;height:143px;border:none" src="designer_mapping_graphical_general_settings.png"/><p style="text-align:center"><span class="f_ImageCaption">Settings affecting the behaviour of the mapping</span></p></div></div>
<p class="p_Normal">Normally both settings are <span class="f_Emphasize">Disabled</span>. </p>
<p class="p_Normal">If XSI handling is set to the value <span class="f_Emphasize">write schema instance</span> type then in the created document each element has an attribute named <span class="f_Emphasize">type</span> with namespace <span class="f_Emphasize">http://www.w3.org/2001/XMLSchema-instance</span>.</p>
<p class="p_Normal">The attribute contains the type of the written value. See <a href="http://www.w3.org/TR/xmlschema-1/#Instance_Document_Constructions" target="_blank" class="weblink">Schema-Related Markup in Documents Being Validated</a></p>
<p class="p_Normal">So a structured message created with<span class="f_Emphasize"> XSI handling</span> might contain the following XML document:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&lt;mt_module_list xmlns=&quot;http://weirdsoft.com/plist&quot; </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp;xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp;deliveryDate=&quot;2015-12-02&quot; packdate=&quot;2015-11-30&quot; packtype=&quot;PT1&quot;&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp;&lt;package xsi:type=&quot;xsd:string&quot;&gt;pi1&lt;/package&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp;&lt;Item&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;mid xsi:type=&quot;xsd:int&quot;&gt;101&lt;/mid&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;orderid xsi:type=&quot;xsd:string&quot;&gt;oi1&lt;/orderid&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;itemid xsi:type=&quot;xsd:string&quot;&gt;id2&lt;/itemid&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp;&lt;/Item&gt;</span><br />
<span class="f_CodeExample"> &nbsp; &nbsp;&lt;/package&gt;</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&lt;/mt_module&gt;</span><br />
<span class="f_CodeExample">&nbsp;</span></p>
<p class="p_Normal">The property Transaction may have three values:</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Disabled</span><span class="f_BulletedListNormal"> means that a failure in a node mapping causes the whole mapping to fail with an error.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Create always a transaction on a root level mapping</span><span class="f_BulletedListNormal"> means that all node mappings creating nodes directly under the root are created in one transaction. All node mappings executed in the context of such a root mapping are then executed in the transaction of its parent mappings. If a transaction fails the mapping is not canceled as a whole but the creation of the target node is canceled and reset. Resetting of a target node means that it is not visible at all in the result message of the mapping. </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Use local settings of nodemapping</span><span class="f_BulletedListNormal"> means that the transactional behavior of a node mapping is defined in the properties of the node mapping itself. To change the transactional behavior of a node mapping, </span>select the node mapping in the configuration area and click on the <span class="f_buttonslabelsetc">Edit</span> button. The dialog <span class="f_buttonslabelsetc">change node mapping</span> appears where the user can adapt the Transaction handling.</p><div class="p_BulletedListNormal"><div style="margin:0;width:825px"><img alt="Upper part of the dialog to edit a node mapping" title="Upper part of the dialog to edit a node mapping" width="825" height="88" style="width:825px;height:88px;border:none" src="designer_mapping_graphical_node_transaction_handling.png"/><p style="text-align:center"><span class="f_ImageCaption">Upper part of the dialog to edit a node mapping</span></p></div></div>
<p class="p_BulletedListNormal">Here the user can select <span class="f_Emphasize">Use transaction settings from master</span> or <span class="f_Emphasize">One transaction per record (and its children)</span>. The first one means that the node mapping is executed in the transaction of the parent mapping if the parent mapping is executed in a transaction at all. The second alternative (<span class="f_Emphasize">One transaction per record</span>) means that a new transaction is created for the node mapping and its dependent mappings. <span class="f_BulletedListNormal">If a transaction fails the message mapping is not canceled as a whole but the creation of the target node is canceled and reset as if it was not created. </span></p>
<p class="p_Normal">If a failure arises within a transaction, the cause of that failure and the context of it is then written as a node into the error message which is accessible through the output variable SKIPPEDRECORDS.</p>
<p class="p_Normal"><img alt="designer_mapping_graphical_skipped_records_assignment" width="703" height="169" style="margin:0;width:703px;height:169px;border:none" src="designer_mapping_graphical_skipped_records_assignment.png"/></p>

<!--ZOOMSTOP-->


</div> <!-- idcontent -->
</div><!-- hmbox --> 
</body>
</html>
