<!DOCTYPE html>
<html>
<head>
   <title>Java Compiling</title>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, minimum-scale=1" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="content-language" content="en-us" />
   <meta name="description" content="This section explains how the code from extended java mapping is translated to Java." />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link id="tabscheme" type="text/css" href="hm_topic.css" rel="stylesheet" />   
<style type="text/css">
/* No header topics */

/* Breadcrumb trail */
p#breadcrumbs {
font-family: Verdana, Tahoma, Helvetica, Sans-Serif;   padding: 2px 0 1px 2px;
   margin: 0;
   font-size: 8pt; 
   color: #999;
   }   
p#breadcrumbs a { color: #999; text-decoration: none;}
p#breadcrumbs a:visited {color: #999;}
p#breadcrumbs a:hover { color: #333; border-bottom: 1px dotted #333; }

/* Search hightlight color */
span.highlight {background-color: #ffff40;}
</style>
<script type="text/javascript">
var hmHeaderTopic = true;

</script> 
<!--[if IE 9]>
<link id="iesvgcss" rel="stylesheet" type="text/css" href="hm_webhelp_svg.css" />
<![endif]-->	
<script src="jquery.js"></script>
<script type="text/javascript" src="jquery.tools.min.js"></script>
<script type="text/javascript" src="jquery.scrollTo-min.js"></script>
<script type="text/javascript"> 
// General topic variables
var tVars = {
   hmHelpPage: "index.html",
   nextP: "designer_mapping_functions.html",
   prevP: "designer_mapping_exended_java.html",
   currP: "designer_java-compiling.html",
   descr: "This section explains how the code from extended java mapping is translated to Java.",
   keys: "",
   defP: "designer_mapping_exended_java.html",
   mailUrl: "",
   mailUrlQuery: "",
   projectTitle: "Documentation",
   titleP: "Java Compiling",
   mailsubject: "Your feedback: Documentation - Java Compiling",
   sharesubject: "Documentation - Java Compiling",
   simplesubject: "Documentation%20Feedback",
   mailid: "designer_Java-Compiling",
   mailpath: "Orchestra Documentation &gt; Reference Manual &gt; Designer Reference &gt; Scenario Elements &gt; Message mappings &gt; Extended Java mapping &gt; Java Compiling /",
   mailbody: "",
   fbtype: false,
   header: true,
   background: "spacer.gif",
   tablesReady: false,
   togglesReady: false,
   webRedirect: true,
   topicTitleBar: true,
   titleBarContent: "topic",
   printFooter: true,
   zoomTip: "Click here to view image in its original size",
   autoPrint: true,
   printButton: "Print",
   printButtonTip: "Print topic"
   }
// Popup configuration
 var hmpBShadow = true;
 var hmPopSmallDim = 500;
 var hmPopKillVideo = true;
 // AutoTOC variables
 var hmatocvars = {
   atoc_show: true,
   atoc_title: "Topic content",
   atoc_tip: "Navigate to:&nbsp;",
   atoc_minHeaders: 3,
   atoc_btntip_off: "No topiv headers on this site",
   atoc_btntip_on: "Show/hide topic menu",
   atoc_toptip: "Navigate to beginning of page",
   atoc_top: "Beginning of page",
   atoc_bg: "#f6f6f6",
   atoc_border: "silver",
   atoc_linkcolor: "#444",
   atoc_linklimit: 45,
   atoc_hovercolor: "#000",
   atoc_hoverbgcolor: "#e0e0e0"
}
// Sortable tables
var sortVars = {
   europeandate: false,
   germanNumbers: false,
   imagePath: "",
   image_up: "arrow-up.gif",
   image_down: "arrow-down.gif",
   image_empty: "arrow-empty.gif",
   image_none: "arrow-none.gif",
   sort_tip: "Click here to sort column",
   umlauts: "false"
   }

</script>


<script type="text/javascript" src="helpman_settings.js"></script>
<script type="text/javascript" src="helpman_topicinit.js"></script>
<script type="text/javascript" src="hmtopic.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "designer_java-compiling.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!-- Help & Manual Premium Pack templates by Tim Green, Copyright (c) 2011-2014, All Rights Reserved -->
<!--ZOOMSTOP-->



<ul id="topictabs" class="tabs">
<li id="indextab" class="hmtabs"><a href="#" id="indextablink" class="current"><span>Java Compiling</span></a></li>
</ul>
<div id="hmbox">
<div id="hmheader">
<div id="hmheadercontents">
<p id="breadcrumbs" class="sync-toc">
<b><span class="sync-toc"><a rel="nofollow" class="sync-toc-link" href="index.html?designer_java-compiling.html" target="_top">&lt;&lt;&nbsp;Click here for table of contents&nbsp;&gt;&gt;</a>&nbsp;&nbsp;</span></b></p> 
<h1 class="p_Heading1"><span class="f_Heading1">Java Compiling</span></h1>

</div>
<div id="atocIcon" class="navdivs">
<img class="navicon" id="hmAtocLink" src="contents_off.png" alt="No topiv headers on this site" title="No topiv headers on this site" />
<br /><span>Topic content</span>
</div>
</div>
<div id="autoTocWrapper" class="topicmenu"></div>
<div id="idcontent">
<div id="unclicker"></div>
<!--ZOOMRESTART-->
<p class="p_Normal">This section explains how the code from extended java mapping is translated to Java.</p>
<p class="p_Normal">The internal used compiler is Janino. It accepts only Java 1.4 syntax. The XJava source code is translated to Java with a preprocessor. This preprocessor accepts additionally to Java 1.4 the for-loop over collections as well as XPath path expressions.</p>
<p class="p_Subheading2"><span class="f_Subheading2">Concrete translations</span></p>
<p class="p_Normal">A loop of the type</p>
<p class="p_CodeExample" style="line-height: 1.80; page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(&lt;typ&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;var&gt;:</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;expr&gt;)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;statement&gt;</span> </p>
<p class="p_Normal">is translated to</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(Iterator</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">it</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;expr&gt;.iterator();</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">it.hasNext();</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span style="width:48px;display:inline-block">&nbsp;</span><span class="f_CodeExample">&lt;typ&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Varname</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(&lt;typ&gt;)it.next();</span><span class="f_CodeExample" style="color: #ffffff;">  </span><span class="f_CodeExample">&lt;statement&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">}</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">In procedural mappings structural messages are often accessed by XPath. For that reason, all parameters of type message are unwrapped before the call of the execute() method. That means that the mapping is provided a DOM-tree for each message and this DOM-tree can be accessed procedural or via XPath. The DOM-tree can be fetched by the method <span class="f_CodeExample">getDocument()</span>:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">Document</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">getDocument(Message</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">msg)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">EpiBaseException</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Usually, this method is not called explicitly, but implicitly through the XPath-methods<span style="color: #ffffff;"> </span><span class="f_CodeExample">asNode,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectR,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectChildrenR,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectL,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectChildrenL</span><span class="f_CodeExample" style="color: #ffffff;"> </span>and<span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">appendChild</span> (view below).</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Within procedural mappings, XPath expressions of the type</p>
<p class="p_CodeExample" style="line-height: 1.80; page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">$&lt;variable/&lt;RelativeLocationPath&gt;</span> </p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;">can be used. <span class="f_CodeExample">&lt;RelativeLocationPath&gt; </span>is definded by the syntax specified in the specification of XPath 1.0: http://www.w3.org/TR/1999/REC-xpath-19991116/#NT-RelativeLocationPath</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">An expression of the type</p>
<p class="p_Normal"> <span class="f_CodeExample">$&lt;variable/&lt;RelativeLocationPath&gt;</span> </p>
<p class="p_Normal">is translated as follows:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Is it on the left side of an assignment, like</p>
<p class="p_CodeExample" style="line-height: 1.80; page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">$&lt;variable/&lt;RelativeLocationPath&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;expr&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_Normal">the following Java-statement is created:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">assign(selectL(&lt;variable&gt;,&quot;&lt;xpath&gt;&quot;),</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;expr&gt;);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Typically, an expression like that is used for creating the target document, e.g.:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">$var/dst:record/dst:feld</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&quot;xy&quot;.</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Is the XPath expression not on the left side of an assignment, the following Java-statement is created:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">selectR(&lt;variable&gt;,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&quot;&lt;xpath&quot;))</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The method <span class="f_CodeExample">selectR</span> (and thereby all XPath expressions that are used as an expression and not as an assignment target) provide a <span class="f_CodeExample">NodeSet</span>.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">A loop of the type</p>
<p class="p_CodeExample" style="line-height: 1.80; page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;typ&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;var&gt;:</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">$VAR/&lt;xpath&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;statement&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_Normal">is translated to</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(Iterator</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">it</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectR(VAR,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&quot;&lt;xpath&gt;&quot;).iterator();</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">it.hasNext();</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span style="width:48px;display:inline-block">&nbsp;</span><span class="f_CodeExample">&lt;typ&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Varname</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(&lt;typ&gt;)it.next();</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;statement&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">}</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">That means it is possible to directly iterate through the NodeSet that is provided by a XPath expression.</p>
<p class="p_Normal">Typically, a corresponding loop will look like that:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">select</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(Node</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">node1:</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">$VAR/src:record/src:child</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><br />
<span style="width:48px;display:inline-block">&nbsp;</span><span class="f_CodeExample">...</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">}</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The call</p>
<p class="p_CodeExample" style="line-height: 1.80; page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">appendChild</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">$name/&lt;rpath&gt;/&lt;p&gt;:&lt;ln&gt;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_Normal">is translated to</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">appendChild</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">selectL(name,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;rpath&gt;),</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&lt;namespace&gt;,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&quot;&lt;ln&gt;&quot;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">)</span></p>

<!--ZOOMSTOP-->


</div> <!-- idcontent -->
</div><!-- hmbox --> 
</body>
</html>
