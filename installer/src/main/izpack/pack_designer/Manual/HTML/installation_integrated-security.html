<!DOCTYPE html>
<html>
<head>
   <title>Integrated Security</title>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, minimum-scale=1" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="SQLServer" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="content-language" content="en-us" />
   <meta name="description" content="Remarks The integrated authentication of MS SQL Server works only if also the database client (in our case Orchestra) runs on Windows! &nbsp;Also, the Windows client must run in the..." />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link id="tabscheme" type="text/css" href="hm_topic.css" rel="stylesheet" />   
<style type="text/css">
/* No header topics */

/* Breadcrumb trail */
p#breadcrumbs {
font-family: Verdana, Tahoma, Helvetica, Sans-Serif;   padding: 2px 0 1px 2px;
   margin: 0;
   font-size: 8pt; 
   color: #999;
   }   
p#breadcrumbs a { color: #999; text-decoration: none;}
p#breadcrumbs a:visited {color: #999;}
p#breadcrumbs a:hover { color: #333; border-bottom: 1px dotted #333; }

/* Search hightlight color */
span.highlight {background-color: #ffff40;}
</style>
<script type="text/javascript">
var hmHeaderTopic = true;

</script> 
<!--[if IE 9]>
<link id="iesvgcss" rel="stylesheet" type="text/css" href="hm_webhelp_svg.css" />
<![endif]-->	
<script src="jquery.js"></script>
<script type="text/javascript" src="jquery.tools.min.js"></script>
<script type="text/javascript" src="jquery.scrollTo-min.js"></script>
<script type="text/javascript"> 
// General topic variables
var tVars = {
   hmHelpPage: "index.html",
   nextP: "installation_oracle.html",
   prevP: "installation_mssql.html",
   currP: "installation_integrated-security.html",
   descr: "Remarks The integrated authentication of MS SQL Server works only if also the database client (in our case Orchestra) runs on Windows! &nbsp;Also, the Windows client must run in the...",
   keys: "SQLServer",
   defP: "installation_mssql.html",
   mailUrl: "",
   mailUrlQuery: "",
   projectTitle: "Documentation",
   titleP: "Integrated Security",
   mailsubject: "Your feedback: Documentation - Integrated Security",
   sharesubject: "Documentation - Integrated Security",
   simplesubject: "Documentation%20Feedback",
   mailid: "installation_Integrated-Security",
   mailpath: "Orchestra Documentation &gt; Installation &gt; Installation Database &gt; MSSQL &gt; Integrated Security /",
   mailbody: "",
   fbtype: false,
   header: true,
   background: "spacer.gif",
   tablesReady: false,
   togglesReady: false,
   webRedirect: true,
   topicTitleBar: true,
   titleBarContent: "topic",
   printFooter: true,
   zoomTip: "Click here to view image in its original size",
   autoPrint: true,
   printButton: "Print",
   printButtonTip: "Print topic"
   }
// Popup configuration
 var hmpBShadow = true;
 var hmPopSmallDim = 500;
 var hmPopKillVideo = true;
 // AutoTOC variables
 var hmatocvars = {
   atoc_show: true,
   atoc_title: "Topic content",
   atoc_tip: "Navigate to:&nbsp;",
   atoc_minHeaders: 3,
   atoc_btntip_off: "No topiv headers on this site",
   atoc_btntip_on: "Show/hide topic menu",
   atoc_toptip: "Navigate to beginning of page",
   atoc_top: "Beginning of page",
   atoc_bg: "#f6f6f6",
   atoc_border: "silver",
   atoc_linkcolor: "#444",
   atoc_linklimit: 45,
   atoc_hovercolor: "#000",
   atoc_hoverbgcolor: "#e0e0e0"
}
// Sortable tables
var sortVars = {
   europeandate: false,
   germanNumbers: false,
   imagePath: "",
   image_up: "arrow-up.gif",
   image_down: "arrow-down.gif",
   image_empty: "arrow-empty.gif",
   image_none: "arrow-none.gif",
   sort_tip: "Click here to sort column",
   umlauts: "false"
   }

</script>


<script type="text/javascript" src="helpman_settings.js"></script>
<script type="text/javascript" src="helpman_topicinit.js"></script>
<script type="text/javascript" src="hmtopic.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "installation_integrated-security.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!-- Help & Manual Premium Pack templates by Tim Green, Copyright (c) 2011-2014, All Rights Reserved -->
<!--ZOOMSTOP-->



<ul id="topictabs" class="tabs">
<li id="indextab" class="hmtabs"><a href="#" id="indextablink" class="current"><span>Integrated Security</span></a></li>
</ul>
<div id="hmbox">
<div id="hmheader">
<div id="hmheadercontents">
<p id="breadcrumbs" class="sync-toc">
<b><span class="sync-toc"><a rel="nofollow" class="sync-toc-link" href="index.html?installation_integrated-security.html" target="_top">&lt;&lt;&nbsp;Click here for table of contents&nbsp;&gt;&gt;</a>&nbsp;&nbsp;</span></b></p> 
<h1 class="p_Heading1"><span class="f_Heading1">Integrated Security</span></h1>

</div>
<div id="atocIcon" class="navdivs">
<img class="navicon" id="hmAtocLink" src="contents_off.png" alt="No topiv headers on this site" title="No topiv headers on this site" />
<br /><span>Topic content</span>
</div>
</div>
<div id="autoTocWrapper" class="topicmenu"></div>
<div id="idcontent">
<div id="unclicker"></div>
<!--ZOOMRESTART-->
<p class="p_Subheading"><span class="f_Subheading">Remarks</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">The integrated authentication of MS SQL Server works only if also the database client (in our case Orchestra) runs on Windows! </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">Also, the Windows client must run in the according domain, otherwise authentication is not possible.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">Our tests were performed with Windows 2012 and SQL Server 2012. </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_BulletedListNormal">The connection test (in Designer as well as with Squirrel) needs some time in case of error. Presumably this is because the JDBC driver tries to connect several times.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 24px; margin: 19px 0px 0px 0px;"><span style="font-weight:bold; font-size:19px; font-family: 'Calibri';color:#0063a3;display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_Heading2">Testing database channels with the Orchestra Designer</span></p><p class="p_Subheading"><span class="f_Subheading">Logging in the Orchestra Designer</span></p>
<p class="p_Normal">To improve debugging the user should enable logging in the Orchestra designer:<br />
First of all in the file config\logging.properties.gui you should add the following parameter at the end of the file to activate the logging of the MS SQL Server JDBC driver:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid; margin: 0px 0px 0px 13px;"><span class="f_CodeExample">com.microsoft.sqlserver.jdbc.level = FINE</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid; margin: 0px 0px 0px 13px;"><span class="f_CodeExample">com.microsoft.sqlserver.jdbc.SQLServerStatement.level=FINE</span><br />
<span class="f_CodeExample">&nbsp;</span></p>
<p class="p_Normal">Then open the test panel in the designer and also set the trace level to FINE in the tab Logging</p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0084" width="1274" height="400" style="margin:0;width:1274px;height:400px;border:none" src="designer_clip0084.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">There you may encounter messages like:</p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">WARNING &nbsp; &nbsp; &nbsp; &nbsp;[10] &nbsp; &nbsp; &nbsp; dbc.AuthenticationJNI.&lt;clinit&gt;: Failed to load the sqljdbc_auth.dll cause : no sqljdbc_auth in java.library.path</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Subheading"><span class="f_Subheading">Connecting to the database</span></p>
<p class="p_Normal">To establish a connection using the integrated authentication, you must append the string <span class="f_Emphasize">;integratedSecurity=true</span> to the JDBC URL. As User you must set a Windows user plus domain.</p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0085" width="689" height="520" style="margin:0;width:689px;height:520px;border:none" src="designer_clip0085.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">If the database connection is tested, an error message occurs: </p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0088" width="748" height="130" style="margin:0;width:748px;height:130px;border:none" src="designer_clip0088.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">In the test panel in the logging tab you will see the following entries: </p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">31.07/10:23:42.157 &nbsp; &nbsp; &nbsp; WARNING &nbsp; &nbsp; &nbsp; &nbsp;[10] &nbsp; &nbsp; &nbsp; dbc.AuthenticationJNI.&lt;clinit&gt;: </span><span style="font-size: 11px; font-family: 'Courier New'; color: #ff0000;">Failed to load the sqljdbc_auth.dll cause : no sqljdbc_auth in java.library.path</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">...</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">31.07/10:23:56.690 &nbsp; &nbsp; &nbsp; FINE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [10] &nbsp; &nbsp; &nbsp; c.SQLServerConnection.Prelogin: ConnectionID:1 ClientConnectionId: c07e9ff0-9fe0-43a2-8d99-b23ddfb47f42 Server returned major version:11</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">31.07/10:23:56.709 &nbsp; &nbsp; &nbsp; FINE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [10] &nbsp; &nbsp; &nbsp; QLServerException.logException: *** SQLException:ConnectionID:1 ClientConnectionId: c07e9ff0-9fe0-43a2-8d99-b23ddfb47f42 com.microsoft.sqlserver.jdbc.SQLServerException: </span><span style="font-size: 11px; font-family: 'Courier New'; color: #ff0000;">Dieser Treiber ist nicht für integrierte Authentifizierung konfiguriert. </span><span style="font-size: 11px; font-family: 'Courier New';">ClientConnectionId:c07e9ff0-9fe0-43a2-8d99-b23ddfb47f42 Dieser Treiber ist nicht für integrierte Authentifizierung konfiguriert. ClientConnectionId:c07e9ff0-9fe0-43a2-8d99-b23ddfb47f42</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">...</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000; background-color: #e6e6e6;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">This means that the required DLL was not found. You must configure the designer appropriately.</p>
<p class="p_Subheading"><span class="f_Subheading">Adding the sqljdbc_auth.dll</span></p>
<p class="p_Normal">To enable the designer to find the DLL, you should edit the start script <span class="f_Emphasize">designer.cmd</span>. Add the following parameter to the invocation of the Orchestra designer:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> -Djava.library.path=&lt;directory with sqljdbc_auth.dll&gt;</span></p>
<p class="p_Subheading2"><span class="f_Subheading2">before</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&quot;%ORC_JAVA_EXEC%&quot; -showversion -Xmx256M -cp &quot;%CP%&quot; emds.epi.graph.EPIEditor %*</span></p>
<p class="p_Subheading2"><span class="f_Subheading2">after</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&quot;%ORC_JAVA_EXEC%&quot; -Djava.library.path=C:\tools\mssqlserver\sqljdbc_4.0\enu\auth\x86 -showversion -Xmx256M -cp &quot;%CP%&quot; emds.epi.graph.EPIEditor %*</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_notice"><span class="f_notice">Note: The DLL sqljdbc_aut.dll should match the version of the JDBC driver and the used JAVA environment (32/64 bit)! (See also the paragraph Replacement of the JDBC driver)</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 24px; margin: 19px 0px 0px 0px;"><span style="font-weight:bold; font-size:19px; font-family: 'Calibri';color:#0063a3;display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_Heading2">Using SQL Server as Orchestra Runtime with integrated Security</span></p><p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif;">If you want to run the Orchestra runtime with a SQL Server which requires integrated authentication, the tomcat as well as the designer need access to the </span><span class="f_Emphasize">sqljdbc_aut.dll</span><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif;">.</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif;">for tomcat the following parameter has to be added to the Java options:</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span class="f_CodeExample">-Djava.library.path=&lt;directory with sqljdbc_auth.dll&gt;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0089" width="429" height="412" style="margin:0;width:429px;height:412px;border:none" src="designer_clip0089.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">If the tomcat stars with a system account, orchestra will not start and in the log files of SQL Server you will find the following message:</p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: 'Courier New';">07/30/2013 18:20:05,Logon,Unknown,Login failed for user '</span><span style="font-size: 13px; font-family: 'Courier New'; color: #ff0000;">NT-AUTORITÄT\SYSTEM</span><span style="font-size: 13px; font-family: 'Courier New';">'. Reason: Failed to open the explicitly specified database 'ORCHESTRA'. [CLIENT: 127.0.0.1]</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">Using the Windows services configuration you must assign a different account to the tomcat service (the user will then have a certain right)</p>
<p class="p_Warning"><span class="f_Warning">Caveat: If you try to configure this using the tomcat graphical user interface, the right will not be set and tomcat won't start!</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0090" width="776" height="465" style="margin:0;width:776px;height:465px;border:none" src="designer_clip0090.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Subheading"><span class="f_Subheading">Changing the environment_settings.xml</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif;">You must configure the database connection as usual with the exception that you have to append the parameter </span> <span class="f_Emphasize">;integratedSecurity=true</span><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif;"> to the JDBC URL and you must set the Windows user.</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">&lt;group name = &quot;database&quot; enabled=&quot;true&quot;&gt;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';"> &nbsp;&lt;parameter name=&quot;runtime.db.typ&quot; value=&quot;MSSQL&quot; choice=&quot;HSQL|ORACLE|MSSQL|DB2|MYSQL|Derby|INFORMIX&quot; /&gt; </span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';"> &nbsp;&lt;parameter name=&quot;runtime.url&quot; &nbsp; &nbsp;value=&quot;jdbc:sqlserver://localhost:1433;databaseName=ORCHESTRA;integratedSecurity=true&quot; /&gt; </span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';"> &nbsp;&lt;parameter name=&quot;runtime.user&quot; &nbsp; value=&quot;0008594654565046485300066b666b667477000000183c7c908e3f8997649064c59dd37157499b1bfe426fb21a48&quot; /&gt; &lt;!-- </span><span style="font-size: 11px; font-family: 'Courier New'; color: #ff0000;">WIN-272O4IT9M3B\orc</span><span style="font-size: 11px; font-family: 'Courier New';"> --&gt; </span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';"> &nbsp;&lt;parameter name=&quot;runtime.pwd&quot; &nbsp; &nbsp;value=&quot;000855544d534b5646540006677464636f6d000000109ec7db378310b94dec816a91211e59ef&quot; /&gt;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">&lt;/group&gt;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000; background-color: #e6e6e6;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 24px; margin: 19px 0px 0px 0px;"><span style="font-weight:bold; font-size:19px; font-family: 'Calibri';color:#0063a3;display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_Heading2">Replacing the JDBC driver</span></p><p class="p_Normal">Under http://msdn.microsoft.com/de-de/sqlserver/aa937724.aspx you may downlad a newer JDBC driver for MS SQL Server (currently version 4.0).</p>
<p class="p_Normal">You must unpack the new JDBC driver and install it. Depending on the language you get the following directory structure:</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">\---sqljdbc_4.0</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp;\---enu</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;+---auth</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; +---x64</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp;\---sqljdbc_auth.dll</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; \---x86</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp;\---sqljdbc_auth.dll</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;+---help</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;+---xa</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;+---sqljdbc.jar</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample"> &nbsp; &nbsp; &nbsp; &nbsp;\---sqljdbc4.jar</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Notes"><span class="f_Notes">Notes:</span></p>
<p class="p_Emphasize"><span class="f_Emphasize">sqljdbc.jar</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">class library provides support for JDBC 3.0.</span><br />
<span class="f_BulletedListNormal">class library requires a Java Runtime Environment (JRE) of version 5.0. Using sqljdbc.jar on JRE 6.0 or JRE 7.0 will throw an exception when connecting to a database.</span></p>
<p class="p_Emphasize"><span class="f_Emphasize">sqljdbc4.jar</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">class library provides support for JDBC 4.0 API. It includes all of the features of the sqljdbc.jar as well as the new JDBC 4.0 API methods.</span><br />
<span class="f_BulletedListNormal">class library requires a Java Runtime Environment (JRE) of version 6.0 or 7.0. Using sqljdbc4.jar on JRE 5.0 will throw an exception.</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">&nbsp;</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">If you use a 32 bit JVM (Java Virtual Machine), you must use the file </span><span class="f_Emphasize">sqljdbc_auth.dll</span><span class="f_BulletedListNormal"> from the directory x86 even when the operating system is 64 bit.</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">If you use a 64 bit JVM with a x64 processor you must use the file</span><span class="f_Emphasize"> sqljdbc_auth.dll</span><span class="f_BulletedListNormal"> from the directory x64.</span></p>
<p class="p_BulletedListNormal" style="margin: 0px 0px 0px 23px;"><span class="f_BulletedListNormal">&nbsp;</span></p>
<p class="p_Normal">Due to the fact that Orchestra already delivers a JDBC driver you first must remove the file sqljdbc.jar resp. sqljdbc4.jar from the Orchestra lib directory (\orchestra\WEB-INF\lib). You really have to remove it it is not sufficient to simply rename it!</p>
<p class="p_Normal">Now you copy the new JDBC driver <span class="f_Emphasize">sqljdbc4.jar</span> into the lib directory.</p>
<p class="p_Normal">&nbsp;</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 24px; margin: 19px 0px 0px 0px;"><span style="font-weight:bold; font-size:19px; font-family: 'Calibri';color:#0063a3;display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_Heading2">Notes</span></p><p class="p_Subheading"><span class="f_Subheading">error messages</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal">The windows computer where Orchestra is running is not assigned to the domain which the SQL Server is trusting</span></p><p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">ms SQL2012 tmp: Login failed. The login is from an untrusted domain and cannot be used with Windows authentication. ClientConnectionId:25eac6b3-94bf-48a0-8c19-a5b86d32e0dd</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000; background-color: #e6e6e6;">&nbsp;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">com.microsoft.sqlserver.jdbc.SQLServerException: Login failed. The login is from an untrusted domain and cannot be used with Windows authentication. ClientConnectionId:25eac6b3-94bf-48a0-8c19-a5b86d32e0dd</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:254)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:84) </span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">JDBC driver and DDL version don't match to each other. This occurred only with the tomcat, the designer didn't complain.</span></p><p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">30.07/18:02:37.971 &nbsp; &nbsp; &nbsp; SEVERE &nbsp; &nbsp; &nbsp; &nbsp; [11] &nbsp; &nbsp; &nbsp; .StandardContext.listenerStart: Exception sending context initialized event to listener instance of class emds.epi.impl.serverstate.ContainerState</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">java.lang.UnsatisfiedLinkError: com.microsoft.sqlserver.jdbc.AuthenticationJNI.SNISecGenClientContext([B[I[BI[B[I[ZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/logging/Logger;)I</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.AuthenticationJNI.SNISecGenClientContext(Native Method)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.AuthenticationJNI.GenerateClientContext(Unknown Source)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.SQLServerConnection.SSPIData(Unknown Source)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(Unknown Source)</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="width:48px;display:inline-block">&nbsp;</span><span style="font-size: 11px; font-family: 'Courier New';">at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(Unknown Source)</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Wrong Port in the JDBC URL:</span></p><p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">SQLException:ConnectionID:3 com.microsoft.sqlserver.jdbc.SQLServerException: Fehler beim Herstellen der TCP/IP-Verbindung mit dem Host 'localhost', Port 9999.</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">Fehler: 'Connection refused: connect. Überprüfen Sie die Verbindungseigenschaften. Stellen Sie sicher, dass eine SQL Server-Instanz auf dem Host ausgeführt wird</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">und am Port TCP/IP-Verbindungen akzeptiert. Vergewissern Sie sich, dass am Port keine TCP-Verbindungen durch eine Firewall blockiert werden.</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Non existing Server in the JDBC URL:</span></p><p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">SQLException:ConnectionID:5 com.microsoft.sqlserver.jdbc.SQLServerException: Fehler beim Herstellen der TCP/IP-Verbindung mit dem Host 'localhostxx', Port 1433.</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">Fehler: 'null. Überprüfen Sie die Verbindungseigenschaften. Stellen Sie sicher, dass eine SQL Server-Instanz auf dem Host ausgeführt wird</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 11px; font-family: 'Courier New';">und am Port TCP/IP-Verbindungen akzeptiert. Vergewissern Sie sich, dass am Port keine TCP-Verbindungen durch eine Firewall blockiert werden.</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Subheading"><span class="f_Subheading">Checking the SQL Server log files</span></p>
<p class="p_Normal">If a connection to the SQLServer is possible (no blocking firewall9, the log files of the SQL Server deliver interesting information:</p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: 'Courier New';">07/30/2013 18:20:05,Logon,Unknown,Login failed for user 'NT-AUTORITÄT\SYSTEM'. Reason: Failed to open the explicitly specified database 'ORCHESTRA'. [CLIENT: 127.0.0.1]</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000; background-color: #e6e6e6;">&nbsp;</span></p>
<p style="line-height: 1.20; background: #e6e6e6; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: 'Courier New';">07/30/2013 14:37:36,Logon,Unknown,Login failed for user 'WIN-272O4IT9M3B\orc'. Reason: An attempt to login using SQL authentication failed. Server is configured for Windows authentication only. [CLIENT: 192.168.4.14]</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0086" width="305" height="533" style="margin:0;width:305px;height:533px;border:none" src="designer_clip0086.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0087" width="1188" height="559" style="margin:0;width:1188px;height:559px;border:none" src="designer_clip0087.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Subheading"><span class="f_Subheading">More information in the internet</span></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Creating the connection URL </span><br />
<span class="f_BulletedListNormal">http://msdn.microsoft.com/de-de/library/ms378428.aspx</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Tracing the JDBC driver </span><br />
<span class="f_BulletedListNormal">http://msdn.microsoft.com/de-de/library/ms378517.aspx</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 13px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_Bulletedtopiclist">Microsoft JDBC Driver for SQL Server </span><br />
<span class="f_BulletedListNormal">http://msdn.microsoft.com/de-de/sqlserver/aa937724.aspx</span></p><p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Subheading"><span class="f_Subheading">Test with Squirrel</span></p>
<p class="p_Normal">To exclude Orchestra errors it might be helpful to use a different tool to check the connection. This might also show more Information. Squirrel is such an alternative tool. Of course this tool also must know the DLL. For squirrel you edit the file squirrel-sql.bat and add the parameter -Djava.library.path=&lt;path&gt; to the invocation:</p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid; margin: 0px 0px 0px 13px;"><span class="f_CodeExample">...</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid; margin: 0px 0px 0px 13px;"><span class="f_CodeExample">start &quot;SQuirreL SQL Client&quot; /B &quot;%LOCAL_JAVA%&quot; -Xmx256m -Djava.library.path=C:\tools\mssqlserver\sqljdbc_4.0\enu\auth\x86 -Dsun.java2d.noddraw=true -cp %SQUIRREL_CP% -splash:&quot;%SQUIRREL_SQL_HOME%/icons/splash.jpg&quot; net.sourceforge.squirrel_sql.client.Main %TMP_PARMS%</span><br />
<span class="f_CodeExample">...</span></p>
<p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><img alt="designer_clip0091" width="1205" height="804" style="margin:0;width:1205px;height:804px;border:none" src="designer_clip0091.png"/></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="line-height: 1.20; margin: 0px 0px 0px 0px;"><span style="font-size: 13px; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>

<!--ZOOMSTOP-->


</div> <!-- idcontent -->
</div><!-- hmbox --> 
</body>
</html>
