<!DOCTYPE html>
<html>
<head>
   <title>Script</title>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, minimum-scale=1" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="content-language" content="en-us" />
   <meta name="description" content="Description Scriptlets are predefined Java code fragments for often used or complicated operations. In most cases he code of these scriptlets can be changed and adapted the the..." />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link id="tabscheme" type="text/css" href="hm_topic.css" rel="stylesheet" />   
<style type="text/css">
/* No header topics */

/* Breadcrumb trail */
p#breadcrumbs {
font-family: Verdana, Tahoma, Helvetica, Sans-Serif;   padding: 2px 0 1px 2px;
   margin: 0;
   font-size: 8pt; 
   color: #999;
   }   
p#breadcrumbs a { color: #999; text-decoration: none;}
p#breadcrumbs a:visited {color: #999;}
p#breadcrumbs a:hover { color: #333; border-bottom: 1px dotted #333; }

/* Search hightlight color */
span.highlight {background-color: #ffff40;}
</style>
<script type="text/javascript">
var hmHeaderTopic = true;

</script> 
<!--[if IE 9]>
<link id="iesvgcss" rel="stylesheet" type="text/css" href="hm_webhelp_svg.css" />
<![endif]-->	
<script src="jquery.js"></script>
<script type="text/javascript" src="jquery.tools.min.js"></script>
<script type="text/javascript" src="jquery.scrollTo-min.js"></script>
<script type="text/javascript"> 
// General topic variables
var tVars = {
   hmHelpPage: "index.html",
   nextP: "designer_process_model_loop.html",
   prevP: "designer_process_model_response.html",
   currP: "designer_process_model_script.html",
   descr: "Description Scriptlets are predefined Java code fragments for often used or complicated operations. In most cases he code of these scriptlets can be changed and adapted the the...",
   keys: "",
   defP: "designer_process_model_activities.html",
   mailUrl: "",
   mailUrlQuery: "",
   projectTitle: "Documentation",
   titleP: "Script",
   mailsubject: "Your feedback: Documentation - Script",
   sharesubject: "Documentation - Script",
   simplesubject: "Documentation%20Feedback",
   mailid: "designer_process_model_Script",
   mailpath: "Orchestra Documentation &gt; Reference Manual &gt; Designer Reference &gt; Scenario Elements &gt; Process models &gt; Activities &gt; Script /",
   mailbody: "",
   fbtype: false,
   header: true,
   background: "spacer.gif",
   tablesReady: false,
   togglesReady: false,
   webRedirect: true,
   topicTitleBar: true,
   titleBarContent: "topic",
   printFooter: true,
   zoomTip: "Click here to view image in its original size",
   autoPrint: true,
   printButton: "Print",
   printButtonTip: "Print topic"
   }
// Popup configuration
 var hmpBShadow = true;
 var hmPopSmallDim = 500;
 var hmPopKillVideo = true;
 // AutoTOC variables
 var hmatocvars = {
   atoc_show: true,
   atoc_title: "Topic content",
   atoc_tip: "Navigate to:&nbsp;",
   atoc_minHeaders: 3,
   atoc_btntip_off: "No topiv headers on this site",
   atoc_btntip_on: "Show/hide topic menu",
   atoc_toptip: "Navigate to beginning of page",
   atoc_top: "Beginning of page",
   atoc_bg: "#f6f6f6",
   atoc_border: "silver",
   atoc_linkcolor: "#444",
   atoc_linklimit: 45,
   atoc_hovercolor: "#000",
   atoc_hoverbgcolor: "#e0e0e0"
}
// Sortable tables
var sortVars = {
   europeandate: false,
   germanNumbers: false,
   imagePath: "",
   image_up: "arrow-up.gif",
   image_down: "arrow-down.gif",
   image_empty: "arrow-empty.gif",
   image_none: "arrow-none.gif",
   sort_tip: "Click here to sort column",
   umlauts: "false"
   }

</script>


<script type="text/javascript" src="helpman_settings.js"></script>
<script type="text/javascript" src="helpman_topicinit.js"></script>
<script type="text/javascript" src="hmtopic.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "designer_process_model_script.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!-- Help & Manual Premium Pack templates by Tim Green, Copyright (c) 2011-2014, All Rights Reserved -->
<!--ZOOMSTOP-->



<ul id="topictabs" class="tabs">
<li id="indextab" class="hmtabs"><a href="#" id="indextablink" class="current"><span>Script</span></a></li>
</ul>
<div id="hmbox">
<div id="hmheader">
<div id="hmheadercontents">
<p id="breadcrumbs" class="sync-toc">
<b><span class="sync-toc"><a rel="nofollow" class="sync-toc-link" href="index.html?designer_process_model_script.html" target="_top">&lt;&lt;&nbsp;Click here for table of contents&nbsp;&gt;&gt;</a>&nbsp;&nbsp;</span></b></p> 
<h1 class="p_Heading1"><span class="f_Heading1">Script</span></h1>

</div>
<div id="atocIcon" class="navdivs">
<img class="navicon" id="hmAtocLink" src="contents_off.png" alt="No topiv headers on this site" title="No topiv headers on this site" />
<br /><span>Topic content</span>
</div>
</div>
<div id="autoTocWrapper" class="topicmenu"></div>
<div id="idcontent">
<div id="unclicker"></div>
<!--ZOOMRESTART-->
<h2 class="p_Heading2"><span class="f_Heading2">Description</span></h2>
<p class="p_BulletedListNormal"><span class="f_BulletedListNormal">Scriptlets are predefined Java code fragments for often used or complicated operations. In most cases he code of these scriptlets can be changed and adapted the the current application. They can be seen as transformation functions. A scriptlet expects and returns parameter. The configuration of a script is similar to activity <a href="designer_process_model_call.html" class="topiclink">call</a>. The scriptlets can be divided in three parts: </span></p>
<p class="p_BulletedListNormal"><span class="f_BulletedListNormal"><a href="message-collection.html" class="topiclink">Message collection</a>, <a href="message-conversion.html" class="topiclink">Message conversion</a>, and <a href="dicom-worklist.html" class="topiclink">DICOM worklist</a>.</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Purpose of object</span></h2>
<p class="p_Normal">They are used to do some short transformation of data without touching another system.</p>
<p class="p_Normal">&nbsp;</p>
<h2 class="p_Heading2"><span class="f_Heading2">Create</span></h2>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">1.</span><span class="f_BulletedListNormal"> Create a process model</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">2.</span><span class="f_BulletedListNormal">Open the panel named </span><span class="f_Emphasize">process</span><span class="f_BulletedListNormal">, per default this panel is on the right side of the Orchestra designer window.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">3.</span><span class="f_BulletedListNormal">Click on the folder </span><span class="f_Emphasize">activities</span><span class="f_BulletedListNormal"> to see its content.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">4.</span><span class="f_BulletedListNormal">Click on &quot;Script&quot;.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">5.</span><span class="f_BulletedListNormal">Click on any place in your process model.</span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">6.</span><span class="f_BulletedListNormal">A selection window will appear. Select the intended kind of script. </span></p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 20px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Calibri';color:#000000;display:inline-block;width:20px;margin-left:-20px">7.</span><span class="f_BulletedListNormal">Integrate it in process schedule, by clicking on the scriptlet icon and drag and drop the arrow to the to be connected item.</span></p><h2 class="p_Heading2"><span class="f_Heading2">Icon</span></h2>
<p class="p_ImageCaption"><span class="f_BulletedListNormal"> </span><img alt="designer_process_model_activity_script_icon" width="85" height="45" style="margin:0;width:85px;height:45px;border:none" src="designer_process_model_activity_script_icon.png"/></p>
<h2 class="p_Heading2"><span class="f_Heading2">Configuration</span></h2>
<p class="p_Subheading"><span class="f_Subheading">Label and Non functional properties</span></p>
<p class="p_Normal">See at common configurations for <a href="designer_process_model_activities.html" class="topiclink">activities</a>.</p>
<p class="p_Subheading"><span class="f_Subheading">Properties</span></p>
<p class="p_Normal">Properties can be configured the same way as process model <a href="designer_process_model_variables.html" class="topiclink">properties</a>. Similar to the definition of input, output and local variables, to use in whole process model do you have to define them also for a script execution. In first step the variable, which take place have to be declared. This happens in section properties. You can add all variables, you need for process.</p>
<p class="p_Subheading"><span class="f_Subheading">Script</span></p>
<p class="p_Normal">In this tab the used script is declared.</p>
<p class="p_ImageCaption"><img alt="designer_process_Model_activity_script_config" width="922" height="502" style="margin:0;width:922px;height:502px;border:none" src="designer_process_model_activity_script_config.png"/></p>
<p class="p_BulletedListNormal">The scripts are written in programming language java. You can modify given ones or create a new one, too. </p>
<p class="p_BulletedListNormal">To declare some libraries and classes to use, open the drop-down selection <span class="f_buttonslabelsetc">Archives &amp; Import-Declaration</span><span class="f_BulletedListNormal">. For usage of other Orchestra and java classes you can add an </span><span class="f_buttonslabelsetc">external archive</span><span class="f_BulletedListNormal"> of type <a href="standard-java-archive.html" class="topiclink">Standard Java Archive</a>. To import the necessary classes please declare your import statements in </span><span class="f_buttonslabelsetc">Import declaration</span><span class="f_BulletedListNormal"> field.</span></p>
<p class="p_BulletedListNormal"><span class="f_BulletedListNormal">In the field below the code of the script can be changed. This field is emty if you didn´t choose a given script type. In the case above you see as a example the script <a href="messagelist_get.html" class="topiclink">MessageList.get</a>.</span></p>
<p class="p_BulletedListNormal"><span class="f_BulletedListNormal">After adding changes click </span><span class="f_buttonslabelsetc">Validate</span><span class="f_BulletedListNormal"> to check whether there are some errors. If you want to choose another given script click Scriptlet and select the intended one.</span></p>
<p class="p_BulletedListNormal"><span class="f_BulletedListNormal">If you would like to store you script but don't want to close Script dialog you can click on </span><span class="f_buttonslabelsetc">Save</span><span class="f_BulletedListNormal"> button the script will doesn't lost when you close the dialog.</span></p>
<p class="p_Subheading"><span class="f_Subheading">Parameter assignment and Process variable assignment</span></p>
<p class="p_Normal">The assignment sections define the variable connection between the script execution and process model. A script don't have to use the same naming for variables as the process model. For a correct communication this assignment of variables is done here. Usually a script needs some parameters from process model to execute. Therefor in section Parameter assignment all intended variables of the script are listed. </p>
<p class="p_Normal">The other way round, after execution of the script, there may be some return values, which have to be assigned to the process variables in section process variable assignment.</p>
<p class="p_Normal">To store the result you usually have to assign the main object to the CURMSG of process model.</p>
<p class="p_Normal">The list of process variables can be changed in <a href="designer_process_model_variables.html" class="topiclink">properties</a> of the model.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The connection of variables takes place in table <span class="f_Comment">mapping</span> which has the following fields:</p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 26px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Courier New';color:#000000;display:inline-block;width:13px;margin-left:-13px">o</span>State: The state shows whether the assignment is correct. In field state below the mapping table a short description is given. There are three states:</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>Green: Correct input</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>Warning: Assignment is not correct</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>Error: Something is wrong with the variable-</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 26px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Courier New';color:#000000;display:inline-block;width:13px;margin-left:-13px">o</span>Target: The variable name of the parameter in target. &nbsp;</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 26px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Courier New';color:#000000;display:inline-block;width:13px;margin-left:-13px">o</span>Lang: The programming language of expression. This can be either Java or XPath.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 26px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Courier New';color:#000000;display:inline-block;width:13px;margin-left:-13px">o</span>Expression: The variable, function or value, which will be assigned to target variable. To have an overview of possible values right-click on expression field, to see a choice of possible content. You can insert:</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>A variable from source, e.g. CURMSG or MSG</p><p class="p_ImageCaption"><img alt="designer_process_model_activity_parameter_curmsg" width="495" height="23" style="margin:0;width:495px;height:23px;border:none" src="designer_process_model_activity_parameter_curmsg.png"/></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>A value, e.g. string, integer or Boolean</p><p class="p_ImageCaption"><img alt="designer_process_model_activity_parameter_string" width="498" height="22" style="margin:0;width:498px;height:22px;border:none" src="designer_process_model_activity_parameter_string.png"/></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>A value generated out of a java function:</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 52px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span> A Boolean value, whether mass data option is selected for current message</p><p class="p_ImageCaption"><img alt="designer_process_model_activity_parameter_function1" width="490" height="24" style="margin:0;width:490px;height:24px;border:none" src="designer_process_model_activity_parameter_function1.png"/></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 52px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span>String value, which includes the name of scenario.</p><p class="p_ImageCaption"><img alt="designer_process_model_activity_parameter_function2" width="489" height="20" style="margin:0;width:489px;height:20px;border:none" src="designer_process_model_activity_parameter_function2.png"/></p>
<p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 52px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span>See a selection of the Orchestra generated Java functions <a href="designer_java-functions.html" class="topiclink">here</a>.</p><p style="text-align: left; text-indent: 0px; line-height: 1.80; padding: 0px 0px 0px 39px; margin: 0px 0px 0px 10px;"><span style="font-size:15px; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#9642;</span>A value generated out of XPATH expression using the<a href="designer_xpatheditor.html" class="topiclink"> XPath Editor</a>.</p><p class="p_Normal">If you choose one single record you can see additional information in fields target and State.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span class="f_buttonslabelsetc">Target</span> gives information about the target type: variable name &lt;data type&gt;, short description of intended value</p>
<p class="p_Normal">In field <span class="f_buttonslabelsetc">state</span> you can see problems and mismatches. In case of a error the text contains the error message. If everything is alright it just says &quot;OK&quot;.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The button <span class="f_buttonslabelsetc">Automapping</span> automatically clears wrong connection and maps values with same name.</p>
<p class="p_Normal">Button <span class="f_buttonslabelsetc">Clear errors</span> refreshes the view of parameter. It could be possible that some target values have been changed. With clear errors reloads Orchestra the parameters to actual state. </p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">In field <span class="f_buttonslabelsetc">namespace context</span> you can add or remove namespaces for Xpath expressions. This is commonly used and filled automatically, if you declare a XPath. The namespace URI of the selected record gets a prefix for potential later use.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>

<!--ZOOMSTOP-->


</div> <!-- idcontent -->
</div><!-- hmbox --> 
</body>
</html>
