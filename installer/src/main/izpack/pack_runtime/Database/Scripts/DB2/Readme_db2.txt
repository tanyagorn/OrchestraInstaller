Orchestra auf DB2 (Windows)-------------------------------Befehlsfenster öffnenals admin die Datenbank erstellen    db2 CREATE DATABASE ORC AUTOMATIC STORAGE YES ON 'C:\' ALIAS ORCauf die neue DB verbinden    db2 CONNECT TO ORCmit dem Skript 00 die Tablespaces anlegen (vorher in das Skripte-Verzeichnis wechseln + evtl. noch Pfade anpassen!)den Pfad für die Tablespaces kann man mit diesem Befehl herausfinden: db2pd -db ORC -tablespaces    db2 -tvf 00_sys_tablespace.sqlSchema anlegen    db2 CREATE SCHEMA ORCHESTRA AUTHORIZATION ORCHESTRABerechtigungen vergeben    db2 GRANT  DBADM,CREATETAB,CONNECT ON DATABASE TO USER ORCHESTRAdann als Benutzer ORCHESTRA anmelden    db2 CONNECT TO ORC user ORCHESTRA-->> Passwort eingebenmit der Batch-Datei run_all.bat werden die einzelnen Skripte eingespielt    run_all.batanschließend die Logdatei log_sql_orc.txt prüfen (nach Zeilen suchen bei denen SQLSTATE ungleich 02000 bzw. 01550 ist!)Orchestra auf DB2 (Linux)-------------------------------Konsole öffnenals db2inst1 die Datenbank erstellen    db2 CREATE DATABASE ORC AUTOMATIC STORAGE YES ON '/home/db2inst1/db2/' ALIAS ORCauf die neue DB verbinden    db2 CONNECT TO ORCmit dem Skript 00 die Tablespaces anlegen (vorher in das Skripte-Verzeichnis wechseln + evtl. noch Pfade anpassen!)den Pfad für die Tablespaces kann man mit diesem Befehl herausfinden: db2pd -db ORC -tablespaces    db2 -tvf 00_sys_tablespace.sqlSchema anlegen    db2 CREATE SCHEMA ORCHESTRA AUTHORIZATION ORCHESTRABerechtigungen vergeben    db2 GRANT  DBADM,CREATETAB,CONNECT ON DATABASE TO USER ORCHESTRAdann als Benutzer ORCHESTRA anmelden    db2 CONNECT TO ORC user ORCHESTRA-->> Passwort eingebenmit dem Shell-Skript run_all.sh werden die einzelnen Skripte eingespielt    . ./run_all.sh-->> Achtung: der erste Punkt ist notwendig, damit die Umgebung (DB-Verbindung) beim Ausführen des Skriptes erhalten bleibt!anschließend die Logdatei log_sql_orc.txt prüfen (nach Zeilen suchen bei denen SQLSTATE ungleich 02000 bzw. 01550 ist!)-------------------------------Bei schnell aufeinanderfolgenden SAP-RFCs im Eingang,z.B. bei IDOCs, kann es zu folgendem Problem kommen:emds.epi.decl.exceptions.TechnicalException: [[DB2 SQL Error: SQLCODE=-911, SQLSTATE=40001, SQLERRMC=2, DRIVER=3.52.95]]	at emds.epi.impl.messagestore.persistent.xml.XMLDatabaseMessageConstructor.close(XMLDatabaseMessageConstructor.java:277)	at emds.epi.impl.mappingengine.OrchestraMessageMappingHandler.processMapping(OrchestraMessageMappingHandler.java:152)	at emds.epi.impl.queue.external.WorkItemMappingTask.process(WorkItemMappingTask.java:65)	at emds.epi.impl.queue.DecoratedWorkItem.process(DecoratedWorkItem.java:34)	at emds.epi.impl.queue.WorkProcessorThread.run(WorkProcessorThread.java:101)Caused by: emds.epi.decl.exceptions.TechnicalException: [DB2 SQL Error: SQLCODE=-911, SQLSTATE=40001, SQLERRMC=2, DRIVER=3.52.95]	at emds.epi.impl.messagestore.persistent.DB2ContentWriter.close(DB2ContentWriter.java:138)	at emds.epi.impl.messagestore.persistent.PersistentMessageBuilderImpl.close(PersistentMessageBuilderImpl.java:43)	at emds.epi.impl.messagestore.persistent.xml.XMLDatabaseMessageConstructor.close(XMLDatabaseMessageConstructor.java:275)SQLCODE=-911, SQLSTATE=40001 weist auf einen deadlock hin.Die Ursache ist die Sperrlogik von DB2.Um diese Sperrlogik zu ändern müssen folgende Parameter geändert werden:db2set DB2_RR_TO_RS=ON 				-> discontinued since Version 10.1db2set DB2_EVALUNCOMMITTED=ONdb2set DB2_SKIPINSERTED=ONdb2set DB2_SKIPDELETED=ONDie folgenden Befehle muss ein Benutzer mit Admin-Rechten ausgeführen (nicht ORCHESTRA):DB2 SQL Error: SQLCODE=-954, SQLSTATE=57011, SQLERRMC=null, DRIVER=3.52.95-->> db2 UPDATE DB CFG FOR ORC USING APPLHEAPSZ 4000B2 SQL Error: SQLCODE=-805, SQLSTATE=51002, SQLERRMC=NULLID.SYSLH203 0X5359534C564C3031, DRIVER=3.52.95-->> db2 UPDATE DB CFG FOR ORC USING MAXAPPLS 150- in das bnd-Verzeichnis (Windows: C:\Programme\IBM\SQLLIB\bnd oder Linux: /opt/ibm/db2/V11.1/bnd/) wechseln und diesen Befehl ausführen:-->> db2 bind @db2cli.lst blocking all grant public sqlerror continue CLIPKG 25Mehr Informationen zu den Fehlermeldungen-----------------------------------------http://www-01.ibm.com/support/docview.wss?uid=swg21208123SYSCAT.PACKAGEAUTHSYSCAT.PACKAGES$db2 "select pkgname,valid from syscat.packages" | grep -i syslh20http://db2commerce.com/2012/11/20/looking-at-how-much-memory-db2-is-using/SQL0805N on DB2 package SYSLH203http://ibm-mainframe-tips.blogspot.de/2009/09/sql0805n-on-db2-package-syslh203.html If you get a SQL0805N on package SYSLH203 then an application is holding a large number of statements open.If this is not an application bug you can bind more packages to allow for more statements open at the same time.Depending on the type of statement you are executing, DB2 will use a particular package on the server. By default,DB2 creates three packages for each type of package. In this case NULLID.SYSLH2yy is reserved for statements withCURSORHOLD on and isolation level Cursor Stability. The package SYSLH203 means that DB2 is looking for the4th package (200 is 1st, 201 is 2nd, etc) of this type, but it does not exist. You can create more packages onthe server by connecting to the database and issuing the following bind command from the /sqllib/bnd directory:db2 bind @db2cli.lst blocking all grant public sqlerror continue CLIPKG 5Note: CLIPKG 5 will create 5 large packages, and will give you the package that your application is looking for, as wellas one more in this case. This setting only applies to large packages (containing 384 sections). The number of smallpackages (containing 64 sections) is 3 and cannot be changed.To bind more CLI packages do the following:    Find a machine that has the version and fixpack of DB2 that you want to bind. You can map to the machine you're going to bind on and then:    - Go to the D:\SQLLIB\BND directory in the DB2 Command Line Processor (DB2CMD)    - Look for the *.BND files in the D:\SQLLIB\BND directory    - Connect to the host via DB2 connect statement like: db2 connect to dbalias user userid    - X:\sqllib\bnd>db2 bind @db2cli.lst blocking all grant public sqlerror continue CLIPKG 30 to bind the max of 30 CLI packages. Range is 4 to 30.